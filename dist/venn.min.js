// https://github.com/christophe-g/d3-venn v1.0.1 Copyright 2021 Caius Eugene
!function(r,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n((r="undefined"!=typeof globalThis?globalThis:r||self).d3=r.d3||{})}(this,(function(r){"use strict";function n(r){for(var n,t,o=0,i=(r=function(r){for(var n,e,t=r.length;t;)e=Math.random()*t--|0,n=r[t],r[t]=r[e],r[e]=n;return r}(Array.from(r))).length,x=[];o<i;)n=r[o],t&&u(t,n)?++o:(t=f(x=e(x,n)),o=0);return t}function e(r,n){var e,u;if(o(n,r))return[n];for(e=0;e<r.length;++e)if(t(n,r[e])&&o(i(r[e],n),r))return[r[e],n];for(e=0;e<r.length-1;++e)for(u=e+1;u<r.length;++u)if(t(i(r[e],r[u]),n)&&t(i(r[e],n),r[u])&&t(i(r[u],n),r[e])&&o(x(r[e],r[u],n),r))return[r[e],r[u],n];throw new Error}function t(r,n){var e=r.r-n.r,t=n.x-r.x,u=n.y-r.y;return e<0||e*e<t*t+u*u}function u(r,n){var e=r.r-n.r+1e-9*Math.max(r.r,n.r,1),t=n.x-r.x,u=n.y-r.y;return e>0&&e*e>t*t+u*u}function o(r,n){for(var e=0;e<n.length;++e)if(!u(r,n[e]))return!1;return!0}function f(r){switch(r.length){case 1:return{x:(n=r[0]).x,y:n.y,r:n.r};case 2:return i(r[0],r[1]);case 3:return x(r[0],r[1],r[2])}var n}function i(r,n){var e=r.x,t=r.y,u=r.r,o=n.x,f=n.y,i=n.r,x=o-e,c=f-t,a=i-u,h=Math.sqrt(x*x+c*c);return{x:(e+o+x/h*a)/2,y:(t+f+c/h*a)/2,r:(h+u+i)/2}}function x(r,n,e){var t=r.x,u=r.y,o=r.r,f=n.x,i=n.y,x=n.r,c=e.x,a=e.y,h=e.r,y=t-f,l=t-c,s=u-i,v=u-a,p=x-o,d=h-o,_=t*t+u*u-o*o,g=_-f*f-i*i+x*x,M=_-c*c-a*a+h*h,m=l*s-y*v,w=(s*M-v*g)/(2*m)-t,b=(v*p-s*d)/m,q=(l*g-y*M)/(2*m)-u,A=(y*d-l*p)/m,B=b*b+A*A-1,j=2*(o+w*b+q*A),E=w*w+q*q-o*o,T=-(B?(j+Math.sqrt(j*j-4*B*E))/(2*B):E/j);return{x:t+w+b*T,y:u+q+A*T,r:T}}function c(r,n,e){var t,u,o,f,i=r.x-n.x,x=r.y-n.y,c=i*i+x*x;c?(u=n.r+e.r,u*=u,f=r.r+e.r,u>(f*=f)?(t=(c+f-u)/(2*c),o=Math.sqrt(Math.max(0,f/c-t*t)),e.x=r.x-t*i-o*x,e.y=r.y-t*x+o*i):(t=(c+u-f)/(2*c),o=Math.sqrt(Math.max(0,u/c-t*t)),e.x=n.x+t*i-o*x,e.y=n.y+t*x+o*i)):(e.x=n.x+e.r,e.y=n.y)}function a(r,n){var e=r.r+n.r-1e-6,t=n.x-r.x,u=n.y-r.y;return e>0&&e*e>t*t+u*u}function h(r){var n=r._,e=r.next._,t=n.r+e.r,u=(n.x*e.r+e.x*n.r)/t,o=(n.y*e.r+e.y*n.r)/t;return u*u+o*o}function y(r){this._=r,this.next=null,this.previous=null}function l(r){if(!(f=(e=r,r="object"==typeof e&&"length"in e?e:Array.from(e)).length))return 0;var e,t,u,o,f,i,x,l,s,v,p,d;if((t=r[0]).x=0,t.y=0,!(f>1))return t.r;if(u=r[1],t.x=-u.r,u.x=t.r,u.y=0,!(f>2))return t.r+u.r;c(u,t,o=r[2]),t=new y(t),u=new y(u),o=new y(o),t.next=o.previous=u,u.next=t.previous=o,o.next=u.previous=t;r:for(l=3;l<f;++l){c(t._,u._,o=r[l]),o=new y(o),s=u.next,v=t.previous,p=u._.r,d=t._.r;do{if(p<=d){if(a(s._,o._)){u=s,t.next=u,u.previous=t,--l;continue r}p+=s._.r,s=s.next}else{if(a(v._,o._)){(t=v).next=u,u.previous=t,--l;continue r}d+=v._.r,v=v.previous}}while(s!==v.next);for(o.previous=t,o.next=u,t.next=u.previous=u=o,i=h(t);(o=o.next)!==u;)(x=h(o))<i&&(t=o,i=x);u=t.next}for(t=[u._],o=u;(o=o.next)!==u;)t.push(o._);for(o=n(t),l=0;l<f;++l)(t=r[l]).x-=o.x,t.y-=o.y;return o.r}function s(r){return null==r?null:function(r){if("function"!=typeof r)throw new Error;return r}(r)}function v(){return 0}function p(r){return function(){return r}}function d(r){return Math.sqrt(r.value)}function _(r){return function(n){n.children||(n.r=Math.max(0,+r(n)||0))}}function g(r,n){return function(e){if(t=e.children){var t,u,o,f=t.length,i=r(e)*n||0;if(i)for(u=0;u<f;++u)t[u].r+=i;if(o=l(t),i)for(u=0;u<f;++u)t[u].r-=i;e.r=o+i}}}function M(r){return function(n){var e=n.parent;n.r*=r,e&&(n.x=e.x+r*n.x,n.y=e.y+r*n.y)}}r.venn=function(){var r=null,n=1,e=1,t=v;function u(u){return u.x=n/2,u.y=e/2,r?u.eachBefore(_(r)).eachAfter(g(t,.5)).eachBefore(M(1)):u.eachBefore(_(d)).eachAfter(g(v,1)).eachAfter(g(t,u.r/Math.min(n,e))).eachBefore(M(Math.min(n,e)/(2*u.r))),u}return u.radius=function(n){return arguments.length?(r=s(n),u):r},u.size=function(r){return arguments.length?(n=+r[0],e=+r[1],u):[n,e]},u.padding=function(r){return arguments.length?(t="function"==typeof r?r:p(+r),u):t},u},Object.defineProperty(r,"__esModule",{value:!0})}));
